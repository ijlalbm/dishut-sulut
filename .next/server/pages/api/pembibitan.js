"use strict";(()=>{var e={};e.id=8176,e.ids=[8176],e.modules={46387:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},49211:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},60948:(e,r,t)=>{t.r(r),t.d(r,{config:()=>d,default:()=>l,routeModule:()=>p});var n={};t.r(n),t.d(n,{default:()=>s});var i=t(64592),a=t(46387),o=t(49211),u=t(61871);async function s(e,r){try{if("GET"===e.method){let[e]=await u.d.query("SELECT * FROM pembibitan");return r.status(200).json(e)}if("POST"===e.method){let{nama_persemaian:t,pengelola:n,latitude:i,longitude:a,jenis_bibit:o,jumlah_siap_tanam:s,penyuluh_id:l}=e.body;if(!t||!n)return r.status(400).json({error:"nama_persemaian and pengelola are required"});let[d]=await u.d.query(`INSERT INTO pembibitan (
          nama_persemaian, pengelola, latitude, longitude, jenis_bibit, jumlah_siap_tanam, penyuluh_id
        ) VALUES (?, ?, ?, ?, ?, ?, ?)`,[t,n,i??null,a??null,o??null,s??null,l??null]);return r.status(201).json({id:d.insertId})}return r.status(405).json({error:"Method not allowed"})}catch(e){return console.error(e),r.status(500).json({error:"Server error"})}}let l=(0,o.M)(n,"default"),d=(0,o.M)(n,"config"),p=new i.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/pembibitan",pathname:"/api/pembibitan",bundlePath:"",filename:""},userland:n})},61871:(e,r,t)=>{t.d(r,{d:()=>d});let n=require("mysql2/promise");var i=t.n(n);let{MYSQL_HOST:a,MYSQL_PORT:o,MYSQL_USER:u,MYSQL_PASSWORD:s,MYSQL_DATABASE:l}=process.env;if(!a||!u||!l)throw Error("Missing MySQL environment variables");let d=i().createPool({host:a,port:Number(o||3306),user:u,password:s,database:l,connectionLimit:10})},64592:(e,r,t)=>{e.exports=t(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=60948);module.exports=t})();