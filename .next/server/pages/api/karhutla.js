"use strict";(()=>{var e={};e.id=9131,e.ids=[9131],e.modules={46387:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},49211:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},52586:(e,r,t)=>{t.r(r),t.d(r,{config:()=>d,default:()=>s,routeModule:()=>p});var a={};t.r(a),t.d(a,{default:()=>i});var n=t(64592),u=t(46387),o=t(49211),l=t(61871);async function i(e,r){try{if("GET"===e.method){let[e]=await l.d.query("SELECT * FROM karhutla");return r.status(200).json(e)}if("POST"===e.method){let{kabupaten_kota:t,kecamatan:a,desa_kelurahan:n,latitude:u,longitude:o,kawasan:i,akses_lokasi:s,jenis_lahan_terbakar:d,luas_lahan_terbakar:p,tingkat_keparahan:P,sumber_kebakaran:c,penyuluh_id:f}=e.body;if(!t||!a||!n)return r.status(400).json({error:"kabupaten_kota, kecamatan, and desa_kelurahan are required"});let[k]=await l.d.query(`INSERT INTO karhutla (
          kabupaten_kota, kecamatan, desa_kelurahan, latitude, longitude, kawasan, akses_lokasi, jenis_lahan_terbakar, luas_lahan_terbakar, tingkat_keparahan, sumber_kebakaran, penyuluh_id
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[t,a,n,u??null,o??null,i??null,s??null,d??null,p??null,P??null,c??null,f??null]);return r.status(201).json({id:k.insertId})}return r.status(405).json({error:"Method not allowed"})}catch(e){return console.error(e),r.status(500).json({error:"Server error"})}}let s=(0,o.M)(a,"default"),d=(0,o.M)(a,"config"),p=new n.PagesAPIRouteModule({definition:{kind:u.A.PAGES_API,page:"/api/karhutla",pathname:"/api/karhutla",bundlePath:"",filename:""},userland:a})},61871:(e,r,t)=>{t.d(r,{d:()=>d});let a=require("mysql2/promise");var n=t.n(a);let{MYSQL_HOST:u,MYSQL_PORT:o,MYSQL_USER:l,MYSQL_PASSWORD:i,MYSQL_DATABASE:s}=process.env;if(!u||!l||!s)throw Error("Missing MySQL environment variables");let d=n().createPool({host:u,port:Number(o||3306),user:l,password:i,database:s,connectionLimit:10})},64592:(e,r,t)=>{e.exports=t(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=52586);module.exports=t})();