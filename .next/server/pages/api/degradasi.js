"use strict";(()=>{var e={};e.id=9447,e.ids=[9447],e.modules={2711:(e,r,t)=>{t.r(r),t.d(r,{config:()=>l,default:()=>d,routeModule:()=>p});var n={};t.r(n),t.d(n,{default:()=>s});var a=t(64592),u=t(46387),i=t(49211),o=t(61871);async function s(e,r){try{if("GET"===e.method){let[e]=await o.d.query("SELECT * FROM degradasi");return r.status(200).json(e)}if("POST"===e.method){let{kabupaten_kota:t,kecamatan:n,desa_kelurahan:a,latitude:u,longitude:i,jenis_kawasan:s,jenis_tutupan_lahan:d,biomassa_kerapatan_tajuk:l,kondisi_vegetasi:p,gangguan:P,penyuluh_id:c}=e.body;if(!t||!n||!a)return r.status(400).json({error:"kabupaten_kota, kecamatan, and desa_kelurahan are required"});let[f]=await o.d.query(`INSERT INTO degradasi (
          kabupaten_kota, kecamatan, desa_kelurahan, latitude, longitude, jenis_kawasan, jenis_tutupan_lahan, biomassa_kerapatan_tajuk, kondisi_vegetasi, gangguan, penyuluh_id
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[t,n,a,u??null,i??null,s??null,d??null,l??null,p??null,P??null,c??null]);return r.status(201).json({id:f.insertId})}return r.status(405).json({error:"Method not allowed"})}catch(e){return console.error(e),r.status(500).json({error:"Server error"})}}let d=(0,i.M)(n,"default"),l=(0,i.M)(n,"config"),p=new a.PagesAPIRouteModule({definition:{kind:u.A.PAGES_API,page:"/api/degradasi",pathname:"/api/degradasi",bundlePath:"",filename:""},userland:n})},46387:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},49211:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},61871:(e,r,t)=>{t.d(r,{d:()=>l});let n=require("mysql2/promise");var a=t.n(n);let{MYSQL_HOST:u,MYSQL_PORT:i,MYSQL_USER:o,MYSQL_PASSWORD:s,MYSQL_DATABASE:d}=process.env;if(!u||!o||!d)throw Error("Missing MySQL environment variables");let l=a().createPool({host:u,port:Number(i||3306),user:o,password:s,database:d,connectionLimit:10})},64592:(e,r,t)=>{e.exports=t(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=2711);module.exports=t})();