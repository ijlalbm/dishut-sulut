"use strict";(()=>{var e={};e.id=3915,e.ids=[3915],e.modules={46387:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},49211:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,a){return a in n?n[a]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,a)):"function"==typeof n&&"default"===a?n:void 0}}})},61871:(e,n,a)=>{a.d(n,{d:()=>d});let r=require("mysql2/promise");var t=a.n(r);let{MYSQL_HOST:u,MYSQL_PORT:l,MYSQL_USER:o,MYSQL_PASSWORD:s,MYSQL_DATABASE:i}=process.env;if(!u||!o||!i)throw Error("Missing MySQL environment variables");let d=t().createPool({host:u,port:Number(l||3306),user:o,password:s,database:i,connectionLimit:10})},64592:(e,n,a)=>{e.exports=a(75600)},72888:(e,n,a)=>{a.r(n),a.d(n,{config:()=>d,default:()=>i,routeModule:()=>m});var r={};a.r(r),a.d(r,{default:()=>s});var t=a(64592),u=a(46387),l=a(49211),o=a(61871);async function s(e,n){try{if("GET"===e.method){let[e]=await o.d.query("SELECT * FROM perhutanan_sosial");return n.status(200).json(e)}if("POST"===e.method){let{nama_lembaga:a,nomor_sk:r,tanggal_sk:t,nama_kups:u,no_sk_kups:l,komoditas:s,jumlah_produksi:i,desa:d,kecamatan:m,kabupaten_kota:p,skema:_,luas_areal:f,jumlah_anggota:P,nama_ketua:c,nama_kph:k,dokumen_hasil_produk:h,dokumen_fasilitas:A,dokumen_sk:E,penyuluh:g,galeri_foto:b}=e.body;if(!a||!_)return n.status(400).json({error:"nama_lembaga and skema are required"});let[v]=await o.d.query(`INSERT INTO perhutanan_sosial (
          nama_lembaga, nomor_sk, tanggal_sk, nama_kups, no_sk_kups, komoditas, jumlah_produksi, desa, kecamatan, kabupaten_kota, skema, luas_areal, jumlah_anggota, nama_ketua, nama_kph, dokumen_hasil_produk, dokumen_fasilitas, dokumen_sk, penyuluh, galeri_foto
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,[a,r??null,t??null,u??null,l??null,s??null,i??null,d??null,m??null,p??null,_,f??null,P??null,c??null,k??null,h??null,A??null,E??null,g??null,b??null]);return n.status(201).json({id:v.insertId})}return n.status(405).json({error:"Method not allowed"})}catch(e){return console.error(e),n.status(500).json({error:"Server error"})}}let i=(0,l.M)(r,"default"),d=(0,l.M)(r,"config"),m=new t.PagesAPIRouteModule({definition:{kind:u.A.PAGES_API,page:"/api/perhutanan_sosial",pathname:"/api/perhutanan_sosial",bundlePath:"",filename:""},userland:r})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")}};var n=require("../../webpack-api-runtime.js");n.C(e);var a=n(n.s=72888);module.exports=a})();